name: Node.js CI

on:
    push:
        branches: [main]

jobs:
    build:
        runs-on: ubuntu-latest

        steps:
            - uses: actions/checkout@v3
            # - name: Use Node.js '16.x'
            #   uses: actions/setup-node@v3
            #   with:
            #     node-version: '16.x'
            #     cache: 'npm'
            # - name: npm install, build, and test
            #   env:
            #     PORT: 3000
            #   run: |
            #     npm ci
            #     npm run build --if-present
            #     npm test --if-present
            - name: Build, Push and Deploy to Heroku # set whatever name you want to this step
              id: heroku
              uses: jctaveras/heroku-deploy@v3.1.0 # use the latest version of the action
              with:
                  email: ${{ secrets.HEROKU_EMAIL }} # your heroku email
                  api_key: ${{ secrets.HEROKU_API_KEY }} # your heroku api key
                  app_name: ${{ secrets.HEROKU_APP_NAME }} # you aplication name
                  dockerfile_path: '.' # set the path to the folder where the Dockerfile is located
                  process_type: 'web' # Specify the process type you want to build and release
